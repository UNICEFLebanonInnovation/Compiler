{% extends "base.online.html" %}
{% load humanize %}
{% load staticfiles i18n %}
{% get_current_language as LANGUAGE_CODE %}
{% load util_tags %}

{% block extra_head %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/custom.css' %}">
{% endblock %}

{% block content %}

<section class="main-content-wrapper">
            <section id="main-content">
                <div class="title_left">
                    <h3 style="color:#73879C;">{% trans 'Registrations ALP Pre-test' %}</h3>
                </div>
                <hr>
     <div class="row">
         <div class="row tile_count">
            <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i>{% trans 'Total Students' %}</span>
              <div class="count">{{ registrations|intcomma }}</div>
{#              <span class="count_bottom"><i class="green">4% </i> From Yesterday</span>#}
            </div>
             <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i>{% trans 'Total Males' %}</span>
              <div class="count">{{ males|intcomma }}</div>
{#              <span class="count_bottom"><i class="red">4% </i> From Yesterday</span>#}
            </div>
             <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i>{% trans 'Total Females' %}</span>
              <div class="count">{{ females|intcomma }}</div>
{#              <span class="count_bottom"><i class="green">4% </i> From Yesterday</span>#}
            </div>
             <div class="col-md-2 col-sm-4 col-xs-6 tile_stats_count">
              <span class="count_top"><i class="fa fa-user"></i>{% trans 'Total Schools' %}</span>
              <div class="count">{{ schools|intcomma }}</div>
{#              <span class="count_bottom"><i class="green">4% </i> From Yesterday</span>#}
            </div>

         </div>
        <div class="col-md-6 col-sm-6 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2>{% trans '% Students By Age Range' %}</h2>
            <ul class="nav navbar-right panel_toolbox">
{#                <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">

            <div id="per_age_range" style="height:350px;"></div>

          </div>
        </div>
      </div>
        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By Age Range' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
{#                  <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div id="children_age_range" style="height:350px;"></div>
              </div>
            </div>
          </div>


          <div class="col-md-4 col-sm-4 col-xs-12">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By ID Type' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
{#                    <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">

                <div id="hh_id_type" style="height:350px;"></div>

              </div>
            </div>
          </div>

           <div class="col-md-8 col-sm-6 col-xs-12">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By Governorate' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
{#                  <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div id="ChildRegion" style="height:350px;"></div>
              </div>
            </div>
          </div>

    <div class="col-md-6 col-sm-6 col-xs-12">
        <div class="x_panel">
          <div class="x_title">
            <h2>{% trans 'Students By Nationality' %}</h2>
            <ul class="nav navbar-right panel_toolbox">
{#                <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
            </ul>
            <div class="clearfix"></div>
          </div>
          <div class="x_content">

            <div id="hh_nationality" style="height:350px;"></div>

          </div>
        </div>
    </div>

       <div class="">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By Governorate by Grade' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div>
                      <button class="btn btn-info" id="export1">
                        <i class="icon-export-sign icon-white"></i>&nbsp;
                            Export
                      </button>
                    <table class="table table-striped table-bordered cell-border"
                           data-tableName="Number of children by Assigned level"
                           data-height="500"
                           data-pagination="true"
                           data-search="true"
                           cellspacing="0"
                           width="100%"
                           id="exporttable1">
                        <thead>
                            <tr>
                                <th rowspan="3">Governorate</th>
                                <th colspan="27"># of children by Assigned level</th>
                            </tr>
                            <tr>
                                {% for level in education_levels %}
                                    <th colspan="2">{{ level.name }}</th>
                                {% endfor %}
                                <th rowspan="2">Total Male</th>
                                <th rowspan="2">Total Female</th>
                                <th rowspan="2">Total</th>
                            </tr>
                            <tr>
                              {% for level in education_levels %}
                                    <th>Male</th>
                                    <th>Female</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for gov in governorates %}
                            <tr>
                                <td><strong>{{ gov.name }}</strong></td>
                                {% for level in education_levels %}
                                <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments gov.id level.id 'Male' as number %}
                                    {{ number }}
                                </td>
                                <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments gov.id level.id 'Female' as number %}
                                    {{ number }}
                                </td>
                                {% endfor %}
                                <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments gov.id 0 'Male' as number %}
                                    {{ number }}
                                </td>
                               <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments gov.id 0 'Female' as number %}
                                    {{ number }}
                                </td>
                               <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments gov.id 0 as number %}
                                    {{ number }}
                                </td>
                            </tr>
                            {% endfor %}
                            <tr>
                                <td><strong>Total</strong></td>
                                {% for level in education_levels %}
                                <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments 0 level.id 'Male' as number %}
                                    {{ number }}
                                </td>
                                <td>
                                    {% alp_by_gov_by_assignedlevel_by_gender enrollments 0 level.id 'Female' as number %}
                                    {{ number }}
                                </td>
                                {% endfor %}
                                <td>{{ males }}</td>
                                <td>{{ females }}</td>
                                <td>{{ registrations }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>
            </div>
          </div>

         <div class="">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By Governorate by Age' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div>
                      <button class="btn btn-info" id="export2">
                        <i class="icon-export-sign icon-white"></i>&nbsp;
                            Export
                      </button>
                    {% get_range_int 0 30 as ages %}
                    <table class="table table-striped table-bordered cell-border"
                           data-tableName="# of children by Age"
                           data-height="500"
                           data-pagination="true"
                           data-search="true"
                           cellspacing="0"
                           width="100%"
                           id="exporttable2">
                        <thead>
                            <tr>
                                <th rowspan="2">Governorate</th>
                                <th colspan="31"># of children by Age</th>
                            </tr>
                            <tr>
                                {% for age in ages %}
                                    <th>{{ age }}</th>
                                {% endfor %}
                                <th>Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for gov in governorates %}
                                {% get_range_int 0 30 as ages1 %}
                            <tr>
                                <td><strong>{{ gov.name }}</strong></td>
                                {% for age in ages1 %}
                                    <td>
                                        {% alp_by_gov_by_age enrollments gov.id age as number %}
                                        {{ number }}
                                    </td>
                                {% endfor %}
                                <td>
                                    {% alp_by_gov_by_age enrollments gov.id 0 as number %}
                                    {{ number }}
                                </td>
                            </tr>
                            {% endfor %}
                            <tr>
                                <td><strong>Total</strong></td>
                                {% get_range_int 0 30 as ages2 %}
                                {% for age in ages2 %}
                                    <td>
                                        {% alp_by_gov_by_age enrollments 0 age as number %}
                                        {{ number }}
                                    </td>
                                {% endfor %}
                                <td>
                                    {{ registrations }}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
              </div>
            </div>
          </div>

        <div class="col-md-4 col-sm-6 col-xs-12">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Schools By Governorate' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
{#                  <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div id="schools_by_governate" style="height:350px;"></div>
              </div>
            </div>
          </div>

           <div class="">
            <div class="x_panel">
              <div class="x_title">
                <h2>{% trans 'Students By School' %}</h2>
                <ul class="nav navbar-right panel_toolbox">
{#                  <li><a class="close-link"><i class="fa fa-close"></i></a></li>#}
                    <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
                </ul>
                <div class="clearfix"></div>
              </div>
              <div class="x_content">
                <div id="ChildSchool" style="height:3000px;"></div>
              </div>
            </div>
          </div>
    </div>

</section>
    </section>
{% endblock %}

{% block extra_js %}
    <script src="//cdn.rawgit.com/rainabba/jquery-table2excel/1.1.0/dist/jquery.table2excel.min.js"></script>
    <script type="text/javascript" src="{% static 'js/echarts/dist/echarts.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/custom.min.js' %}"></script>

    <script>

    $(document).ready(function(){
        $('#export1').click(function(){
            $("#exporttable1").table2excel({
                exclude: ".noExl",
                name: "Excel Document Name",
                filename: $("#exporttable1").attr('data-tableName')+'.xls',
                fileext: ".xlsx",
                exclude_img: true,
                exclude_links: true,
                exclude_inputs: true
            });
        });
        $('#export2').click(function(){
            $("#exporttable2").table2excel({
                exclude: ".noExl",
                name: "Excel Document Name",
                filename: $("#exporttable2").attr('data-tableName')+'.xls',
                fileext: ".xlsx",
                exclude_img: true,
                exclude_links: true,
                exclude_inputs: true
            });
        });
    });

     var theme = {
          color: [
              '#26B99A', '#34495E', '#BDC3C7', '#3498DB',
              '#9B59B6', '#8abb6f', '#759c6a', '#bfd3b7'
          ],

          title: {
              itemGap: 8,
              textStyle: {
                  fontWeight: 'normal',
                  color: '#408829'
              }
          },

          dataRange: {
              color: ['#1f610a', '#97b58d']
          },

          toolbox: {
              color: ['#408829', '#408829', '#408829', '#408829']
          },

          tooltip: {
              backgroundColor: 'rgba(0,0,0,0.5)',
              axisPointer: {
                  type: 'line',
                  lineStyle: {
                      color: '#408829',
                      type: 'dashed'
                  },
                  crossStyle: {
                      color: '#408829'
                  },
                  shadowStyle: {
                      color: 'rgba(200,200,200,0.3)'
                  }
              }
          },

          dataZoom: {
              dataBackgroundColor: '#eee',
              fillerColor: 'rgba(64,136,41,0.2)',
              handleColor: '#408829'
          },
          grid: {
              borderWidth: 0
          },

          categoryAxis: {
              axisLine: {
                  lineStyle: {
                      color: '#408829'
                  }
              },
              splitLine: {
                  lineStyle: {
                      color: ['#eee']
                  }
              }
          },

          valueAxis: {
              axisLine: {
                  lineStyle: {
                      color: '#408829'
                  }
              },
              splitArea: {
                  show: true,
                  areaStyle: {
                      color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
                  }
              },
              splitLine: {
                  lineStyle: {
                      color: ['#eee']
                  }
              }
          },
          timeline: {
              lineStyle: {
                  color: '#408829'
              },
              controlStyle: {
                  normal: {color: '#408829'},
                  emphasis: {color: '#408829'}
              }
          },

          k: {
              itemStyle: {
                  normal: {
                      color: '#68a54a',
                      color0: '#a9cba2',
                      lineStyle: {
                          width: 1,
                          color: '#408829',
                          color0: '#86b379'
                      }
                  }
              }
          },
          map: {
              itemStyle: {
                  normal: {
                      areaStyle: {
                          color: '#ddd'
                      },
                      label: {
                          textStyle: {
                              color: '#c12e34'
                          }
                      }
                  },
                  emphasis: {
                      areaStyle: {
                          color: '#99d2dd'
                      },
                      label: {
                          textStyle: {
                              color: '#c12e34'
                          }
                      }
                  }
              }
          },
          force: {
              itemStyle: {
                  normal: {
                      linkStyle: {
                          strokeColor: '#408829'
                      }
                  }
              }
          },
          chord: {
              padding: 4,
              itemStyle: {
                  normal: {
                      lineStyle: {
                          width: 1,
                          color: 'rgba(128, 128, 128, 0.5)'
                      },
                      chordStyle: {
                          lineStyle: {
                              width: 1,
                              color: 'rgba(128, 128, 128, 0.5)'
                          }
                      }
                  },
                  emphasis: {
                      lineStyle: {
                          width: 1,
                          color: 'rgba(128, 128, 128, 0.5)'
                      },
                      chordStyle: {
                          lineStyle: {
                              width: 1,
                              color: 'rgba(128, 128, 128, 0.5)'
                          }
                      }
                  }
              }
          },
          gauge: {
              startAngle: 225,
              endAngle: -45,
              axisLine: {
                  show: true,
                  lineStyle: {
                      color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                      width: 8
                  }
              },
              axisTick: {
                  splitNumber: 10,
                  length: 12,
                  lineStyle: {
                      color: 'auto'
                  }
              },
              axisLabel: {
                  textStyle: {
                      color: 'auto'
                  }
              },
              splitLine: {
                  length: 18,
                  lineStyle: {
                      color: 'auto'
                  }
              },
              pointer: {
                  length: '90%',
                  color: 'auto'
              },
              title: {
                  textStyle: {
                      color: '#333'
                  }
              },
              detail: {
                  textStyle: {
                      color: 'auto'
                  }
              }
          },
          textStyle: {
              fontFamily: 'Arial, Verdana, sans-serif'
          }
      };



     var hh_nationality = echarts.init(document.getElementById('hh_nationality'), theme);

      hh_nationality.setOption({
        tooltip: {
          trigger: 'item',
          formatter: "{b}<br />{c} : ({d}%)"
        },
        legend: {
          x: 'center',
          y: 'bottom',
          data: [
                  {% for nationality,numberofadults in students_by_nationality.items %}
                        '{{ nationality }}' + ' ' +  '{{ numberofadults }}',
                    {% endfor %}
          ]
        },
        toolbox: {
          show: true,
          feature: {
            magicType: {
              show: true,
              type: ['pie', 'funnel'],
              option: {
                funnel: {
                  x: '25%',
                  width: '50%',
                  funnelAlign: 'left',
                  max: 1548
                }
              }
            },
{#            restore: {#}
{#              show: true,#}
{#              title: "Restore"#}
{#            },#}
{#            saveAsImage: {#}
{#              show: true,#}
{#              title: "Save Image"#}
{#            }#}
          }
        },
        calculable: true,
        series: [{
          name: '',
          type: 'pie',
          radius: '55%',
          center: ['50%', '48%'],
          data: [
                  {% for nationality,numberofadults in students_by_nationality.items %}
                        {
                    value: {{ numberofadults }},
                    name: '{{ nationality }}' + ' ' +  '{{ numberofadults }}'
                  },
                    {% endfor %}
              ]
        }]
      });

      var per_age_range = echarts.init(document.getElementById('per_age_range'), theme);

      per_age_range.setOption({
        tooltip: {
          trigger: 'item',
          formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
          x: 'center',
          y: 'bottom',
          data: [
                  {% for range,numberofchildren in age_range.items %}
                        '{{ range }} - {{ numberofchildren|percentage:6235 }}%',
                    {% endfor %}
          ]
        },
        toolbox: {
          show: true,
          feature: {
            magicType: {
              show: true,
              type: ['pie', 'funnel'],
              option: {
                funnel: {
                  x: '25%',
                  width: '50%',
                  funnelAlign: 'left',
                  max: 1548
                }
              }
            },
{#            restore: {#}
{#              show: true,#}
{#              title: "Restore"#}
{#            },#}
{#            saveAsImage: {#}
{#              show: true,#}
{#              title: "Save Image"#}
{#            }#}
          }
        },
        calculable: true,
        series: [{
          name: '',
          type: 'pie',
          radius: '55%',
          center: ['50%', '48%'],
          data: [
                  {% for range,numberofchildren in age_range.items %}
                        {
                    value: {{ numberofchildren }},
                    name: '{{ range }} - {{ numberofchildren|percentage:6235 }}%'
                  },
                    {% endfor %}
              ]
        }]
      });


      var children_age_range = echarts.init(document.getElementById('children_age_range'), theme);

      children_age_range.setOption({

        tooltip: {
          trigger: 'axis'
        },
        toolbox: {
          show: true,
          feature: {
{#            saveAsImage: {#}
{#              show: true,#}
{#              title: "Save Image"#}
{#            }#}
          }
        },
        calculable: false,
        xAxis: [{
          type: 'category',
          data: [
                  {% for range,numberofchildren in age_range.items %}
                    '{{ range }}',
                  {% endfor %}
                ]
        }],
        yAxis: [{
            type: 'value',
            axisLabel : {
                show:true,
                interval: 'auto',    // {number}
                rotate: -45,
                margin: 7,
                formatter: '{value}',    // Template formatter!
                textStyle: {
                    fontSize: 10
                }
            }
        }],
         series: [
        {
            name: 'Students by Age Range',
            type: 'bar',
            itemStyle: {
                normal: {
                    color: function(params) {
                        // build a color map as your need.
                        var colorList = [
                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                        ];
                        return colorList[params.dataIndex]
                    },
                    label: {
                        show: true,
                        position: 'top',
                        formatter: '{b}\n{c}'
                    }
                }
            },
            data: [
                  {% for range,numberofchildren in age_range.items %}
                        {
                    value: {{ numberofchildren }},
                    name: '{{ range }}'
                  },
                    {% endfor %}
                ]
        }
    ]
      });

    var schools_by_governate = echarts.init(document.getElementById('schools_by_governate'), theme);

      schools_by_governate.setOption({

        tooltip: {
          trigger: 'axis'
        },
        toolbox: {
          show: true,
          feature: {
{#            saveAsImage: {#}
{#              show: true,#}
{#              title: "Save Image"#}
{#            }#}
          }
        },
        calculable: false,
        xAxis: [{
            show: false,
          type: 'category',
          data: [
                  {% for gov,numberofschools in schools_per_gov.items %}
                    '{{ gov }}',
                  {% endfor %}
                ],
                nameTextStyle: {
                    fontSize: '5',
                }
        }],
        yAxis: [{
            type: 'value',
            axisLabel : {
                show:true,
                interval: 'auto',    // {number}
                rotate: -45,
                margin: 7,
                formatter: '{value}',    // Template formatter!
                textStyle: {
                    fontSize: 10,
                }
            },
        }],
         series: [
        {
            name: 'Schools',
            type: 'bar',
            itemStyle: {
                normal: {
                    color: function(params) {
                        // build a color map as your need.
                        var colorList = [
                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                        ];
                        return colorList[params.dataIndex]
                    },
                    label: {
                        show: true,
                        position: 'top',
                        formatter: '{b}\n{c}'
                    }
                }
            },
            data: [
                    {% for gov,numberofschools in schools_per_gov.items %}
                        {{ numberofschools }},
                    {% endfor %}
                ]
        }
    ]
      });

      var ChildRegionBar = echarts.init(document.getElementById('ChildRegion'), theme);

      ChildRegionBar.setOption({

        tooltip: {
          trigger: 'axis'
        },
          toolbox: {
          show: true,
          feature: {
{#            saveAsImage: {#}
{#              show: true,#}
{#              title: "Save Image"#}
{#            }#}
          }
        },

        calculable: false,
        xAxis: [{
          show: false,
          type: 'category',
          data: [
                  {% for gov,numberofchildren in students_per_gov.items %}
                    '{{ gov }}',
                {% endfor %}
            ]
        }],
        yAxis: [{
            type: 'value'
        }],
         series: [
        {
            name: 'Students by Governorate',
            type: 'bar',
            itemStyle: {
                normal: {
                    color: function(params) {
                        // build a color map as your need.
                        var colorList = [
                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',
                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',
                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'
                        ];
                        return colorList[params.dataIndex]
                    },
                    label: {
                        show: true,
                        position: 'top',
                        formatter: '{b}\n{c}'
                    }
                }
            },
            data: [
                    {% for gov,numberofchildren in students_per_gov.items %}
                        {{ numberofchildren }},
                    {% endfor %}
                ]
        }
    ]
      });

    var hh_id_type = echarts.init(document.getElementById('hh_id_type'), theme);

      hh_id_type.setOption({
        tooltip: {
          trigger: 'item',
          formatter: "{b} <br/>{c} : ({d}%)"
        },
        calculable: true,
        legend: {
          x: 'center',
          y: 'bottom',
          data: [
                  {% for type,numberofadults in students_by_idtype.items %}
                        '{{ type }}',
                    {% endfor %}
          ]
        },
        toolbox: {
          show: true,
          feature: {
            magicType: {
              show: true,
              type: ['pie', 'funnel'],
              option: {
                funnel: {
                  x: '25%',
                  width: '50%',
                  funnelAlign: 'center',
                  max: 1548
                }
              }
            },
            restore: {
              show: true,
              title: "Restore"
            },
            saveAsImage: {
              show: true,
              title: "Save Image"
            }
          }
        },
        series: [{
          name: '',
          type: 'pie',
          radius: ['35%', '55%'],
          itemStyle: {
            normal: {
              label: {
                show: true
              },
              labelLine: {
                show: true
              }
            },
            emphasis: {
              label: {
                show: true,
                position: 'center',
                textStyle: {
                  fontSize: '14',
                  fontWeight: 'normal'
                }
              }
            }
          },
          data: [
                  {% for type,numberofadults in students_by_idtype.items %}
                      {value: {{ numberofadults }}, name : '{{ type }}'},
                    {% endfor %}
                ]
        }]
      });


      var ChildSchoolBar = echarts.init(document.getElementById('ChildSchool'), theme);

      ChildSchoolBar.setOption({

        tooltip: {
          trigger: 'xaxis'
        },
          toolbox: {
          show: true,
          feature: {
            saveAsImage: {
              show: true,
              title: "Save Image"
            }
          }
        },

        calculable: false,
        xAxis: [{
            type: 'value'
        }],
        yAxis: [{
          show: false,
          type: 'category',
          data: [
                {% for school,numberofchildren in students_per_school.items %}
                    '{{ school }}',
                {% endfor %}
            ]
        }],
        toolbox: {
          show: true,
          feature: {
            restore: {
              show: true,
              title: "Restore"
            },
            saveAsImage: {
              show: true,
              title: "Save Image"
            }
          }
        },
         series: [
        {
            name: 'Students by School',
            type: 'bar',
            itemStyle: {
                normal: {
{#                    color: function(params) {#}
{#                        // build a color map as your need.#}
{#                        var colorList = [#}
{#                          '#C1232B','#B5C334','#FCCE10','#E87C25','#27727B',#}
{#                           '#FE8463','#9BCA63','#FAD860','#F3A43B','#60C0DD',#}
{#                           '#D7504B','#C6E579','#F4E001','#F0805A','#26C0C0'#}
{#                        ];#}
{#                        return colorList[params.dataIndex]#}
{#                    },#}
                    label: {
                        show: true,
                        position: 'right',
                        formatter: '{b}\n{c}'
                    }
                }
            },
            data: [
                    {% for school,numberofchildren in students_per_school.items %}
                        {{ numberofchildren }},
                    {% endfor %}
                ]
        }
    ]
      });

    </script>
{% endblock %}
